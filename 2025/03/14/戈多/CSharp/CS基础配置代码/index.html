<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CS基础配置代码 | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="脚本配置按键123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384public class GAME_KEY&#123;    &#x2F;&#x2F;方向">
<meta property="og:type" content="article">
<meta property="og:title" content="CS基础配置代码">
<meta property="og:url" content="https://luojiangbao015.github.io/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CS%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="脚本配置按键123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384public class GAME_KEY&#123;    &#x2F;&#x2F;方向">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img2.imgtp.com/2024/03/29/G1firM5D.webp">
<meta property="article:published_time" content="2025-03-14T11:39:30.273Z">
<meta property="article:modified_time" content="2024-09-19T09:49:54.523Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2.imgtp.com/2024/03/29/G1firM5D.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CS基础配置代码",
  "url": "https://luojiangbao015.github.io/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CS%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81/",
  "image": "https://img2.imgtp.com/2024/03/29/G1firM5D.webp",
  "datePublished": "2025-03-14T11:39:30.273Z",
  "dateModified": "2024-09-19T09:49:54.523Z",
  "author": [
    {
      "@type": "Person",
      "name": "John Doe",
      "url": "https://luojiangbao015.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/auraea/img/favicon.png"><link rel="canonical" href="https://luojiangbao015.github.io/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CS%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/auraea/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/auraea/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CS基础配置代码',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://img2.imgtp.com/2024/03/29/G1firM5D.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/auraea/"><span class="site-name">Hexo</span></a><a class="nav-page-title" href="/auraea/"><span class="site-name">CS基础配置代码</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">CS基础配置代码</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-03-14T11:39:30.273Z" title="Created 2025-03-14 19:39:30">2025-03-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-09-19T09:49:54.523Z" title="Updated 2024-09-19 17:49:54">2024-09-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/auraea/categories/godot/">godot</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="脚本配置"><a href="#脚本配置" class="headerlink" title="脚本配置"></a>脚本配置</h1><h2 id="按键"><a href="#按键" class="headerlink" title="按键"></a>按键</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GAME_KEY</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//方向键</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> lift = <span class="string">&quot;ui_left&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> right = <span class="string">&quot;ui_left&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> up = <span class="string">&quot;ui_left&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> down = <span class="string">&quot;ui_left&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鼠标(未配置)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Moue_lift = <span class="string">&quot;ui_lift&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Moue_right = <span class="string">&quot;ui_right&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//26字母(未配置)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_A=<span class="string">&quot;key_a&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_B=<span class="string">&quot;key_b&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_C=<span class="string">&quot;key_c&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_D=<span class="string">&quot;key_d&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_E=<span class="string">&quot;key_e&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_F=<span class="string">&quot;key_f&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_G=<span class="string">&quot;key_g&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_H=<span class="string">&quot;key_h&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_I=<span class="string">&quot;key_i&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_J=<span class="string">&quot;key_j&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_K=<span class="string">&quot;key_k&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_L=<span class="string">&quot;key_l&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_M=<span class="string">&quot;key_m&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_N=<span class="string">&quot;key_n&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_O=<span class="string">&quot;key_o&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_P=<span class="string">&quot;key_p&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_Q=<span class="string">&quot;key_q&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_R=<span class="string">&quot;key_r&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_S=<span class="string">&quot;key_s&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_T=<span class="string">&quot;key_t&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_U=<span class="string">&quot;key_u&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_V=<span class="string">&quot;key_v&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_W=<span class="string">&quot;key_w&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_X=<span class="string">&quot;key_s&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_Y=<span class="string">&quot;key_y&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_Z=<span class="string">&quot;key_z&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//大键盘数字(未配置)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_0=<span class="string">&quot;key_0&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_1=<span class="string">&quot;key_1&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_2=<span class="string">&quot;key_2&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_3=<span class="string">&quot;key_3&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_4=<span class="string">&quot;key_4&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_5=<span class="string">&quot;key_5&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_6=<span class="string">&quot;key_6&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_7=<span class="string">&quot;key_7&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_8=<span class="string">&quot;key_8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> KEY_9=<span class="string">&quot;key_9&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//小键盘数字(未配置)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_0=<span class="string">&quot;min_0&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_1=<span class="string">&quot;min_1&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_2=<span class="string">&quot;min_2&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_3=<span class="string">&quot;min_3&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_4=<span class="string">&quot;min_4&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_5=<span class="string">&quot;min_5&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_6=<span class="string">&quot;min_6&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_7=<span class="string">&quot;min_7&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_8=<span class="string">&quot;min_8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Min_9=<span class="string">&quot;min_9&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//F键数字(未配置)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_0=<span class="string">&quot;f_0&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_1=<span class="string">&quot;f_1&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_2=<span class="string">&quot;f_2&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_3=<span class="string">&quot;f_3&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_4=<span class="string">&quot;f_4&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_5=<span class="string">&quot;f_5&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_6=<span class="string">&quot;f_6&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_7=<span class="string">&quot;f_7&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_8=<span class="string">&quot;f_8&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> F_9=<span class="string">&quot;f_9&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//特殊</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> Ender = <span class="string">&quot;ui_accept&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Space = <span class="string">&quot;ui_select&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Escape = <span class="string">&quot;ui_cancel&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Tab = <span class="string">&quot;ui_focus_next&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> End = <span class="string">&quot;ui_end&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">static</span> <span class="built_in">string</span> Shift_Tab = <span class="string">&quot;ui_focus_prev&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><h2 id="xlsx和json转换"><a href="#xlsx和json转换" class="headerlink" title="xlsx和json转换"></a>xlsx和json转换</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyJson</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> 将xlsx文件转换为JSON并创建JSON文件</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;xlsxpath&quot;&gt;</span>xlsx路径<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;jsonpath&quot;&gt;</span>json输出路径<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CreateJson</span>(<span class="params"><span class="built_in">string</span> xlsxpath,<span class="built_in">string</span> jsonpath</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> workbook = <span class="keyword">new</span> XLWorkbook(xlsxpath))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> worksheet = workbook.Worksheet(<span class="number">1</span>); <span class="comment">// 假设要读取第一个工作表</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> dataTable = <span class="keyword">new</span> System.Data.DataTable();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 从工作表数据填充到DataTable</span></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> row <span class="keyword">in</span> worksheet.RowsUsed())</span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (row.RowNumber() == <span class="number">1</span>) <span class="comment">// 处理表头</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> cell <span class="keyword">in</span> row.CellsUsed())</span><br><span class="line">                    &#123;</span><br><span class="line">                        dataTable.Columns.Add(cell.Value.ToString());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="comment">// 处理数据行</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> dataRow = dataTable.NewRow();</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> cell <span class="keyword">in</span> row.CellsUsed())</span><br><span class="line">                    &#123;</span><br><span class="line">                        dataRow[cell.Address.ColumnNumber - <span class="number">1</span>] = cell.Value.ToString();</span><br><span class="line">                    &#125;</span><br><span class="line">                    dataTable.Rows.Add(dataRow);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将DataTable转换为JSON</span></span><br><span class="line">            <span class="built_in">string</span> json = JsonConvert.SerializeObject(dataTable, Formatting.Indented);</span><br><span class="line">            File.WriteAllText(jsonpath, json);</span><br><span class="line">            <span class="comment">// 打印JSON数据</span></span><br><span class="line">            <span class="comment">//Console.WriteLine(json);</span></span><br><span class="line">            GD.Print(json);</span><br><span class="line">            <span class="comment">//备用路径./Json/xxxc.xlsx</span></span><br><span class="line">            <span class="comment">//备用路径./Json/output.json&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="读取JSON"><a href="#读取JSON" class="headerlink" title="读取JSON"></a>读取JSON</h2><ul>
<li>方法1,这个会将读取到的值映射到对象的属性(需要对象和JSON匹配)</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> json = File.ReadAllText(Directory.GetCurrentDirectory() + <span class="string">&quot;//Json/Player.json&quot;</span>);</span><br><span class="line">主场景 obj = System.Text.Json.JsonSerializer.Deserialize&lt;主场景&gt;(json);</span><br><span class="line">GD.Print(obj);</span><br></pre></td></tr></table></figure>

<ul>
<li>方法2:</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取文件</span></span><br><span class="line"><span class="built_in">string</span> jsontext = File.ReadAllText(Directory.GetCurrentDirectory() + <span class="string">&quot;//Json/Player.json&quot;</span>);</span><br><span class="line"><span class="keyword">using</span>(JsonDocument doc=JsonDocument.Parse(jsontext))  <span class="comment">//解析JSON数据并将其存储在名为&quot;doc&quot;的JsonDocument对象中。</span></span><br><span class="line">&#123;</span><br><span class="line">    JsonElement root=doc.RootElement;                 <span class="comment">//这行代码从JsonDocument中获取根元素并将其存储在名为“root”的JsonElement对象中</span></span><br><span class="line">    <span class="built_in">string</span>  pro=root.GetProperty(<span class="string">&quot;id&quot;</span>).ToString();    <span class="comment">//在这行中，通过调用 GetProperty 方法从根元素中获取名为“id”的属性，并将其值作为字符串存储在变量“pro”中。</span></span><br><span class="line">    GD.Print(doc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法3:异步读取</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取JSON文件</span></span><br><span class="line"><span class="keyword">using</span> (FileStream fs = File.OpenRead(<span class="string">&quot;path_to_your_json_file&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    YourClass obj = <span class="keyword">await</span> JsonSerializer.DeserializeAsync&lt;YourClass&gt;(fs);</span><br><span class="line">    <span class="comment">// 对读取的数据进行处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Text.Json;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">JsonExample</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] <span class="keyword">args</span></span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 定义一个用于序列化的类</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">                <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建 Person 类的实例</span></span><br><span class="line">            Person person = <span class="keyword">new</span> Person</span><br><span class="line">            &#123;</span><br><span class="line">                Name = <span class="string">&quot;John&quot;</span>,</span><br><span class="line">                Age = <span class="number">30</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将 person 对象序列化为 JSON</span></span><br><span class="line">            <span class="built_in">string</span> jsonString = JsonSerializer.Serialize(person);</span><br><span class="line">            Console.WriteLine(jsonString);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将 JSON 反序列化为对象</span></span><br><span class="line">            <span class="built_in">string</span> json = <span class="string">@&quot;&#123;&quot;&quot;Name&quot;&quot;:&quot;&quot;Alice&quot;&quot;,&quot;&quot;Age&quot;&quot;:25&#125;&quot;</span>;</span><br><span class="line">            Person deserializedPerson = JsonSerializer.Deserialize&lt;Person&gt;(json);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;姓名: <span class="subst">&#123;deserializedPerson.Name&#125;</span>, 年龄: <span class="subst">&#123;deserializedPerson.Age&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h1><h2 id="背包"><a href="#背包" class="headerlink" title="背包"></a>背包</h2><ul>
<li>格子主题资源</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">BoxFlatResource</span> : <span class="title">StyleBoxFlat</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BoxFlatResource</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        BgColor=<span class="keyword">new</span> Color(<span class="number">0.756f</span>,<span class="number">0.736f</span>,<span class="number">0.585f</span>,<span class="number">1</span>);  <span class="comment">//背景色</span></span><br><span class="line">        DrawCenter = <span class="literal">true</span>;           <span class="comment">//绘制中心</span></span><br><span class="line">        Skew =<span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);     <span class="comment">//偏移</span></span><br><span class="line">        CornerDetail = <span class="number">8</span>;            <span class="comment">//圆角细节</span></span><br><span class="line"></span><br><span class="line">        SetBorderWidthAll(<span class="number">2</span>);       <span class="comment">//边框宽度</span></span><br><span class="line">        BorderBlend = <span class="literal">false</span>;         <span class="comment">//边框混合</span></span><br><span class="line">        BorderColor = <span class="keyword">new</span> Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);     <span class="comment">//颜色</span></span><br><span class="line"></span><br><span class="line">        SetCornerRadiusAll(<span class="number">3</span>);                <span class="comment">//圆角半径</span></span><br><span class="line">        SetExpandMarginAll(<span class="number">10</span>);                <span class="comment">//扩展边距</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ShadowColor = <span class="keyword">new</span> Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">1</span>);     <span class="comment">//阴影颜色</span></span><br><span class="line">        ShadowSize = <span class="number">0</span>;                            <span class="comment">//阴影大小</span></span><br><span class="line">        ShadowOffset=<span class="keyword">new</span> Vector2(<span class="number">0</span>,<span class="number">0</span>);          <span class="comment">//便宜</span></span><br><span class="line"></span><br><span class="line">        AntiAliasing = <span class="literal">true</span>;          <span class="comment">//抗锯齿</span></span><br><span class="line">        AntiAliasingSize = <span class="number">1</span>;         <span class="comment">//大小</span></span><br><span class="line"></span><br><span class="line">        SetContentMarginAll(<span class="number">8</span>);      <span class="comment">//内容边距</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2D绘制"><a href="#2D绘制" class="headerlink" title="2D绘制"></a>2D绘制</h2><ul>
<li>居中需要将节点和图片的中心位置算出来,然后用节点的中心减去图片的中心位置,就可以得到图片相对节点居中的位置</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Texture2D imageTexture = ResourceLoader.Load&lt;Texture2D&gt;(<span class="string">&quot;res://icon.svg&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用基类的 _Draw 方法</span></span><br><span class="line">    <span class="keyword">base</span>._Draw();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取图片的原始大小</span></span><br><span class="line">    Vector2 textureSize1 = imageTexture.GetSize();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//缩放图片</span></span><br><span class="line">    Vector2 textureSize = <span class="keyword">new</span> Vector2(textureSize1.X/<span class="number">2</span>, textureSize1.Y/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取当前节点的尺寸</span></span><br><span class="line">    Vector2 nodeSize = Size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算图片的中心位置</span></span><br><span class="line">    Vector2 centerPosition = <span class="keyword">new</span> Vector2(nodeSize.X / <span class="number">2</span> - textureSize.X / <span class="number">2</span>, nodeSize.Y / <span class="number">2</span> - textureSize.Y / <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义图片的显示区域和大小</span></span><br><span class="line">    Rect2 rect = <span class="keyword">new</span> Rect2(centerPosition, textureSize);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 draw_texture_rect 方法绘制图片并居中显示</span></span><br><span class="line">    DrawTextureRect(imageTexture, rect, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> font = ThemeDB.FallbackFont;</span><br><span class="line">    <span class="keyword">var</span> font_size = <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> text = <span class="string">&quot;99&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Vector2 position = <span class="keyword">new</span> Vector2(<span class="number">45</span>,<span class="number">60</span>);</span><br><span class="line">    DrawString(font, position, text, HorizontalAlignment.Left, <span class="number">-1</span>, font_size);</span><br><span class="line"><span class="keyword">base</span>._Draw();</span><br></pre></td></tr></table></figure>

<h1 id="第三人称C-控制器"><a href="#第三人称C-控制器" class="headerlink" title="第三人称C#控制器"></a>第三人称C#控制器</h1><ul>
<li><p>条件</p>
<ul>
<li><p>需要2个脚本,一个负责旋转相机,一个负责控制角色,两个脚本的节点虽然互相依赖,不过脚本变量不需要</p>
</li>
<li><p>相机节点放在Node3D节点作为自己,通过旋转Node3D节点控制相机朝向,就是说相机始终是朝着Node3D节点看的,当Node3D节点旋转时,相机也相对跟着旋转从而达到一个聚焦在一个点上旋转的目的</p>
</li>
<li><p>玩家节点的话需要创建两个方法,一个用于控制玩家的移动,一个用于控制玩家的旋转,控制玩家移动需要获得Node3D节点来计算,而计算过后还用于控制玩家的旋转</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Godot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">PlayerCamera</span> : <span class="title">Node3D</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> 鼠标输入;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> 鼠标输入旋转;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> 鼠标输入倾斜;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> 灵敏度 = <span class="number">0.25f</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector3 欧拉旋转;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Export</span>] <span class="keyword">public</span> <span class="built_in">float</span> TiltUpperLimit = Mathf.DegToRad(<span class="number">-60.0f</span>);</span><br><span class="line">    [<span class="meta">Export</span>] <span class="keyword">public</span> <span class="built_in">float</span> TiltLowerLimit = Mathf.DegToRad(<span class="number">60.0f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> _Ready()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 开始隐藏鼠标</span></span><br><span class="line">        Input.MouseMode = Input.MouseModeEnum.Captured;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> _PhysicsProcess(<span class="built_in">double</span> delta)</span><br><span class="line">    &#123;</span><br><span class="line">        欧拉旋转.X += 鼠标输入倾斜 * (<span class="built_in">float</span>)delta;</span><br><span class="line">        <span class="comment">//欧拉旋转.X = Mathf.Clamp(欧拉旋转.X, TiltLowerLimit, TiltUpperLimit); // 限制倾斜角度</span></span><br><span class="line">        欧拉旋转.Y += 鼠标输入旋转 * (<span class="built_in">float</span>)delta;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建新的变换矩阵</span></span><br><span class="line">        Transform3D newTransform = <span class="keyword">new</span> Transform3D(Basis.FromEuler(欧拉旋转), Transform.Origin);</span><br><span class="line">        Transform = newTransform;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化鼠标向量</span></span><br><span class="line">        鼠标输入倾斜 = <span class="number">0.0f</span>;</span><br><span class="line">        鼠标输入旋转 = <span class="number">0.0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> _Input(InputEvent @event)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 初始化鼠标输入为 鼠标移动与获取鼠标模式为隐藏锁定鼠标在视口中心</span></span><br><span class="line">        鼠标输入 = @event <span class="keyword">is</span> InputEventMouseMotion &amp;&amp; Input.MouseMode == Input.MouseModeEnum.Captured;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果鼠标输入满足条件 执行以下代码</span></span><br><span class="line">        <span class="keyword">if</span> (鼠标输入 &amp;&amp; @event <span class="keyword">is</span> InputEventMouseMotion aa)</span><br><span class="line">        &#123;</span><br><span class="line">            鼠标输入旋转 = -aa.Relative.X * 灵敏度; <span class="comment">// 鼠标x轴旋转</span></span><br><span class="line">            鼠标输入倾斜 = -aa.Relative.Y * 灵敏度; <span class="comment">// 鼠标y轴旋转</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Godot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> 玩家控制器 : <span class="title">CharacterBody3D</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Node3D _相机父节点;</span><br><span class="line">    <span class="keyword">public</span> Node3D 活动物体;</span><br><span class="line">    <span class="keyword">public</span> Vector3 旋转向量 = Vector3.Forward;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Export</span>] <span class="keyword">public</span> <span class="built_in">float</span> 跳跃力 = <span class="number">5.0f</span>; <span class="comment">// 跳跃力</span></span><br><span class="line">    [<span class="meta">Export</span>] <span class="keyword">public</span> <span class="built_in">float</span> 移动速度=<span class="number">10</span>;</span><br><span class="line">    [<span class="meta">Export</span>]<span class="keyword">public</span> <span class="built_in">float</span> 旋转速度= <span class="number">10.0f</span>; <span class="comment">// 旋转速度</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> _Ready()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取摄像机节点</span></span><br><span class="line">        _相机父节点 = GetNode&lt;Node3D&gt;(<span class="string">&quot;Node3D&quot;</span>);</span><br><span class="line">        活动物体 = GetNode&lt;Node3D&gt;(<span class="string">&quot;机器人&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> _PhysicsProcess(<span class="built_in">double</span> delta)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//将变量拿出来方便操作</span></span><br><span class="line">        Vector3 velocity = Velocity;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add the gravity.如果不发生碰撞则计算重力</span></span><br><span class="line">        <span class="keyword">if</span> (!IsOnFloor())</span><br><span class="line">        &#123;</span><br><span class="line">            velocity += GetGravity() * (<span class="built_in">float</span>)delta;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Handle Jump.跳跃</span></span><br><span class="line">        <span class="keyword">if</span> (Input.IsActionJustPressed(<span class="string">&quot;ui_accept&quot;</span>) &amp;&amp; IsOnFloor())</span><br><span class="line">        &#123;</span><br><span class="line">            velocity.Y = <span class="number">4.5f</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取玩家移动方向的向量</span></span><br><span class="line">        Vector3 移动方向 = 角色移动();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果玩家的移动方向长度大于0.2,则更新旋转向量</span></span><br><span class="line">        <span class="keyword">if</span> (移动方向.Length() &gt; <span class="number">0.2f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            旋转向量 = 移动方向.Normalized();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将获得的旋转向量给旋转方法,让角色旋转</span></span><br><span class="line">        角色旋转(旋转向量, (<span class="built_in">float</span>)delta);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取玩家的速度方向并分离Y轴</span></span><br><span class="line">        <span class="built_in">float</span> 速度Y = velocity.Y;</span><br><span class="line">        移动方向.Y = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="comment">//通过插值让玩家移动</span></span><br><span class="line">        velocity = velocity.Lerp(移动方向 * 移动速度, <span class="number">10.0f</span> * (<span class="built_in">float</span>)delta);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果移动方向小于等于0则停止移动</span></span><br><span class="line">        <span class="keyword">if</span> (移动方向.Length() == <span class="number">0.0f</span> &amp;&amp; velocity.Length() &lt; <span class="number">1.0f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Velocity = Vector3.Zero;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//重新设置Velocity变量,将Y轴设置为之前的速度</span></span><br><span class="line">        velocity = <span class="keyword">new</span> Vector3(velocity.X, 速度Y, velocity.Z);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Velocity = velocity;</span><br><span class="line">        MoveAndSlide();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> 角色旋转(Vector3 朝向, <span class="built_in">float</span> delta)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> 左轴 = Vector3.Up.Cross(朝向);</span><br><span class="line">        <span class="keyword">var</span> 基础旋转 = <span class="keyword">new</span> Basis(左轴, Vector3.Up, 朝向).GetRotationQuaternion();</span><br><span class="line">        <span class="keyword">var</span> 角色缩放 = 活动物体.Transform.Basis.Scale;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取活动物体当前的Transform</span></span><br><span class="line">        Transform3D 当前变换 = 活动物体.Transform;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建新的Basis矩阵并计算赋值</span></span><br><span class="line">        Basis 新基础 = <span class="keyword">new</span> Basis(活动物体.Transform.Basis.GetRotationQuaternion().Slerp(基础旋转, delta * 旋转速度)).Scaled(角色缩放);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 更新Transform的Basis</span></span><br><span class="line">        当前变换.Basis = 新基础;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 应用新的Transform,将计算过后获得的旋转方向更新给活动物体,让其旋转</span></span><br><span class="line">        活动物体.Transform = 当前变换;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 相机矩阵计算返回</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 角色移动()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 定义变量 获取输入向量</span></span><br><span class="line">        Vector2 输入向量 = Input.GetVector(<span class="string">&quot;ui_left&quot;</span>, <span class="string">&quot;ui_right&quot;</span>, <span class="string">&quot;ui_up&quot;</span>, <span class="string">&quot;ui_down&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义向量初始化为0</span></span><br><span class="line">        Vector3 方向 = Vector3.Zero;</span><br><span class="line">        <span class="comment">// 输入向量计算平方根</span></span><br><span class="line">        方向.X = -输入向量.X * Mathf.Sqrt(<span class="number">1.0f</span> - 输入向量.Y * 输入向量.Y / <span class="number">2.0f</span>);</span><br><span class="line">        方向.Z = -输入向量.Y * Mathf.Sqrt(<span class="number">1.0f</span> - 输入向量.X * 输入向量.X / <span class="number">2.0f</span>);</span><br><span class="line">        <span class="comment">// 输入向量等于相机矩阵*输入向量</span></span><br><span class="line">        方向 = _相机父节点.GlobalTransform.Basis * 方向;</span><br><span class="line">        <span class="comment">// 初始化Y轴为0</span></span><br><span class="line">        方向.Y = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="keyword">return</span> -方向;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">sis * 输入;</span><br><span class="line">        <span class="comment">// 初始化Y轴为0</span></span><br><span class="line">        输入.Y = <span class="number">0.0f</span>;</span><br><span class="line">        <span class="keyword">return</span> -输入;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img title="" src="file:///G:/MyWep/source/_posts/图片/2024911-30813.jpg" alt="2024911-30813.jpg" width="647" data-align="center">tle&#x3D;”” alt&#x3D;”2024911-30813.jpg” width&#x3D;”647”&gt;tle&#x3D;”” alt&#x3D;”2024911-30813.jpg” width&#x3D;”647”&gt;tle&#x3D;”” alt&#x3D;”2024911-30813.jpg” width&#x3D;”647”&gt;</p>
<h1 id="武器篇"><a href="#武器篇" class="headerlink" title="武器篇"></a>武器篇</h1><h2 id="武器"><a href="#武器" class="headerlink" title="武器"></a>武器</h2><h3 id="武器射击模式类的设想"><a href="#武器射击模式类的设想" class="headerlink" title="武器射击模式类的设想"></a>武器射击模式类的设想</h3><h4 id="设想一-通过枚举-即装备组件切换设计状态"><a href="#设想一-通过枚举-即装备组件切换设计状态" class="headerlink" title="设想一:通过枚举,即装备组件切换设计状态"></a>设想一:通过枚举,即装备组件切换设计状态</h4><h4 id="设想二-创建一个部件抽象类-他们有一个抽象向方法-且可以重写-武器调用它的抽象方法-然后用于不同模式-且可以通过部件扩展玩法"><a href="#设想二-创建一个部件抽象类-他们有一个抽象向方法-且可以重写-武器调用它的抽象方法-然后用于不同模式-且可以通过部件扩展玩法" class="headerlink" title="设想二:创建一个部件抽象类,他们有一个抽象向方法,且可以重写,武器调用它的抽象方法,然后用于不同模式,且可以通过部件扩展玩法"></a>设想二:创建一个部件抽象类,他们有一个抽象向方法,且可以重写,武器调用它的抽象方法,然后用于不同模式,且可以通过部件扩展玩法</h4><h3 id="设想三-通过武器赋予子弹方向初始位置并创建子弹发射-子弹是否在途中实现自己的逻辑"><a href="#设想三-通过武器赋予子弹方向初始位置并创建子弹发射-子弹是否在途中实现自己的逻辑" class="headerlink" title="设想三:通过武器赋予子弹方向初始位置并创建子弹发射,子弹是否在途中实现自己的逻辑"></a>设想三:通过武器赋予子弹方向初始位置并创建子弹发射,子弹是否在途中实现自己的逻辑</h3><h2 id="子弹"><a href="#子弹" class="headerlink" title="子弹"></a>子弹</h2><h3 id="子弹位置-方向-旋转"><a href="#子弹位置-方向-旋转" class="headerlink" title="子弹位置,方向,旋转"></a>子弹位置,方向,旋转</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">global_position=武器.子弹位置 #开始位置</span><br><span class="line">linear_velocity=-武器.子弹方向*武器.子弹速度 #发射方向及速度 方向=子弹位置-目标位置再归一化</span><br><span class="line"></span><br><span class="line">#重置旋转</span><br><span class="line">var move_direction = 武器.子弹方向</span><br><span class="line">look_at(global_position + move_direction, Vector3.UP)</span><br><span class="line">rotate_object_local(Vector3.RIGHT,deg_to_rad(90))</span><br></pre></td></tr></table></figure>

<h3 id="子弹1-经过一段距离自动销毁-是否会爆炸-是否穿透敌人"><a href="#子弹1-经过一段距离自动销毁-是否会爆炸-是否穿透敌人" class="headerlink" title="子弹1:经过一段距离自动销毁,是否会爆炸?,是否穿透敌人?"></a>子弹1:经过一段距离自动销毁,是否会爆炸?,是否穿透敌人?</h3><ul>
<li><pre><code class="language-gdscript">using Godot;
using System;

public partial class 子弹场景 : MeshInstance3D
&#123;
    // 定义子弹的速度
    private float _速度 = 10.0f;
    // 定义最大移动距离
    private float _最大移动距离 = 50.0f;
    // 记录子弹的初始位置
    private Vector3 _初始位置;

    public override void _Ready()
    &#123;
        // 记录子弹的初始位置
        _初始位置 = GlobalTransform.Origin;
    &#125;

    public override void _PhysicsProcess(double delta)
    &#123;
        Vector3 方向 = GlobalTransform.Basis.Z;
        // 移动子弹
        Translate(方向 * _速度 * (float)delta);

        // 检查子弹与初始位置的距离
        if (GlobalTransform.Origin.DistanceTo(_初始位置) &gt; _最大移动距离)
        &#123;
            // 超过特定距离后销毁子弹
            QueueFree();
        &#125;
    &#125;

&#125;

#或者
    global_position=武器.子弹位置 #开始位置
    linear_velocity=-武器.子弹方向*武器.子弹速度 #发射方向及速度

    #重置旋转
    look_at(global_position - linear_velocity) 位置-速度
    rotate_object_local(Vector3.RIGHT,deg_to_rad(90))###查看是否相同
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```gdscript</span><br><span class="line">var current_direction = linear_velocity.normalized()</span><br><span class="line">if not global_position.is_equal_approx(global_position + current_direction):</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h3 id="子弹2-碰到墙面会反弹-是否在地面会滚动-相对反弹还是角度反弹"><a href="#子弹2-碰到墙面会反弹-是否在地面会滚动-相对反弹还是角度反弹" class="headerlink" title="子弹2:碰到墙面会反弹,是否在地面会滚动?,相对反弹还是角度反弹?"></a>子弹2:碰到墙面会反弹,是否在地面会滚动?,相对反弹还是角度反弹?</h3><h2 id="陷阱"><a href="#陷阱" class="headerlink" title="陷阱"></a>陷阱</h2><h3 id="地雷-放在地上-怪物碰到会爆炸-对敌人照成伤害"><a href="#地雷-放在地上-怪物碰到会爆炸-对敌人照成伤害" class="headerlink" title="地雷:放在地上,怪物碰到会爆炸,对敌人照成伤害"></a>地雷:放在地上,怪物碰到会爆炸,对敌人照成伤害</h3><ul>
<li>制作思路<code>制作一个地雷类,当怪物碰到时获取敌人信息,并进行减血计算,然后播放爆炸销毁</code></li>
</ul>
<h3 id="毒气-当敌人碰撞时-持续对敌人造成伤害"><a href="#毒气-当敌人碰撞时-持续对敌人造成伤害" class="headerlink" title="毒气:当敌人碰撞时,持续对敌人造成伤害"></a>毒气:当敌人碰撞时,持续对敌人造成伤害</h3><ul>
<li>制作思路<code>当放置后开始计时且记录碰撞到的敌人,让其在一定时间后自动销毁,若时间到了记录的敌人还存在,则关闭粗发检测和显示,并计算伤害,当记录的敌人状态全部消失时则销毁</code></li>
</ul>
<h3 id="落穴-当敌人碰撞后-生成一个坑-并将敌人陷进去使其无法继续移动"><a href="#落穴-当敌人碰撞后-生成一个坑-并将敌人陷进去使其无法继续移动" class="headerlink" title="落穴:当敌人碰撞后,生成一个坑,并将敌人陷进去使其无法继续移动"></a>落穴:当敌人碰撞后,生成一个坑,并将敌人陷进去使其无法继续移动</h3><h2 id="道具"><a href="#道具" class="headerlink" title="道具"></a>道具</h2><h3 id="物品类：记录物品的价格数量图标描述属性等"><a href="#物品类：记录物品的价格数量图标描述属性等" class="headerlink" title="物品类：记录物品的价格数量图标描述属性等"></a>物品类：记录物品的价格数量图标描述属性等</h3><h3 id="可拾取道具-拥有物品类的信息-记录了物品类的ID-当被拾取时向物品类发出信息更新物品类-然后销毁。"><a href="#可拾取道具-拥有物品类的信息-记录了物品类的ID-当被拾取时向物品类发出信息更新物品类-然后销毁。" class="headerlink" title="可拾取道具:拥有物品类的信息,记录了物品类的ID,当被拾取时向物品类发出信息更新物品类,然后销毁。"></a>可拾取道具:拥有物品类的信息,记录了物品类的ID,当被拾取时向物品类发出信息更新物品类,然后销毁。</h3><h3 id="可装备道具：数据存储在物品里，当需要装备时从物品获得数据并实例化一个新的物品装备到玩家身上。"><a href="#可装备道具：数据存储在物品里，当需要装备时从物品获得数据并实例化一个新的物品装备到玩家身上。" class="headerlink" title="可装备道具：数据存储在物品里，当需要装备时从物品获得数据并实例化一个新的物品装备到玩家身上。"></a>可装备道具：数据存储在物品里，当需要装备时从物品获得数据并实例化一个新的物品装备到玩家身上。</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 游戏算法逻辑</span><br><span class="line"></span><br><span class="line">## 怪物移动向玩家</span><br><span class="line"></span><br><span class="line">```gdscript</span><br><span class="line">var 方向=(玩家全局位置-怪物全局位置).normalized()</span><br><span class="line">怪物.velocity=方向*速度</span><br></pre></td></tr></table></figure>

<h2 id="获取距离玩家最近的敌人-返回最近敌人节点"><a href="#获取距离玩家最近的敌人-返回最近敌人节点" class="headerlink" title="获取距离玩家最近的敌人,返回最近敌人节点"></a>获取距离玩家最近的敌人,返回最近敌人节点</h2><ul>
<li>最近</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func 获取所有怪物并返回离玩家最近的怪物(player:CharacterBody3D):</span><br><span class="line">    var 怪物数组 = get_children()</span><br><span class="line">    var nearestEnemy: Node3D = null</span><br><span class="line">    var nearestDistance: float = INF</span><br><span class="line"></span><br><span class="line">    for enemy in 怪物数组:</span><br><span class="line">        if enemy is CharacterBody3D:  # 假设敌人是 CharacterBody3D 类型</span><br><span class="line">            var distance = player.global_position.distance_to(enemy.global_position)</span><br><span class="line">            if distance &lt; nearestDistance:</span><br><span class="line">                nearestDistance = distance</span><br><span class="line">                nearestEnemy = enemy</span><br><span class="line">    return nearestEnemy</span><br></pre></td></tr></table></figure>

<ul>
<li>最远</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func 获取所有怪物并返回离玩家最远的怪物(player: CharacterBody3D) -&gt; Node3D:</span><br><span class="line">    var enemyArray = get_children()</span><br><span class="line">    var farthestEnemy: Node3D = null</span><br><span class="line">    var farthestDistance: float = 0.0</span><br><span class="line"></span><br><span class="line">    for enemy in enemyArray:</span><br><span class="line">        if enemy is CharacterBody3D:  # 假设敌人是 CharacterBody3D 类型</span><br><span class="line">            var distance = player.global_position.distance_to(enemy.global_position)</span><br><span class="line">            if distance &gt; farthestDistance:</span><br><span class="line">                farthestDistance = distance</span><br><span class="line">                farthestEnemy = enemy</span><br><span class="line"></span><br><span class="line">    return farthestEnemy</span><br></pre></td></tr></table></figure>

<h2 id="获取血量最少的敌人-并返回"><a href="#获取血量最少的敌人-并返回" class="headerlink" title="获取血量最少的敌人,并返回"></a>获取血量最少的敌人,并返回</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func 获取所有怪物并返回血量最少的怪物(player: CharacterBody3D) -&gt; Node3D:</span><br><span class="line">    var enemyArray = get_children()</span><br><span class="line">    var lowestHealthEnemy: Node3D = null</span><br><span class="line">    var lowestHealth: float = INF</span><br><span class="line"></span><br><span class="line">    for enemy in enemyArray:</span><br><span class="line">        if enemy is CharacterBody3D:  # 假设敌人是 CharacterBody3D 类型</span><br><span class="line">            var health = enemy.health  # 假设敌人有一个 health 属性</span><br><span class="line">            if health &lt; lowestHealth:</span><br><span class="line">                lowestHealth = health</span><br><span class="line">                lowestHealthEnemy = enemy</span><br><span class="line"></span><br><span class="line">    return lowestHealthEnemy</span><br></pre></td></tr></table></figure>

<h1 id="GUI-1"><a href="#GUI-1" class="headerlink" title="GUI"></a>GUI</h1><h4 id="游戏设想"><a href="#游戏设想" class="headerlink" title="游戏设想"></a>游戏设想</h4><ul>
<li><p>我想制作一个通过部件来强化装备赋予装备效果的游戏,比如通过雷达锁定敌人,通过枪管放大子弹,不过我在开发过程中遇到了难题,就是怎么组合这些武器并给玩家装备上呢,我也希望在GUI上能够实时展示玩家组合后的武器样式。</p>
<ul>
<li><p>于是我得出了这个思路</p>
</li>
<li><p>首先将配件单独作为一个资源类，这个类只是存储图标，模型和一些属性和方法等</p>
</li>
<li><p>然后在设计一个类，这个类可以将这些组件和主武器组合起来成为一个新场景，然后赋予玩家使用。</p>
</li>
<li><p>我有个疑问，这个场景文件是怎么记录属性的呢</p>
</li>
</ul>
</li>
</ul>
<p>拖拽</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var 物品:武器基类=武器基类.new()</span><br><span class="line">@export var color = Color(1, 0, 0, 1)</span><br><span class="line">func _get_drag_data(position):</span><br><span class="line">    #使用不在树中的控件</span><br><span class="line">    var cpb = ColorPickerButton.new()</span><br><span class="line">    cpb.color = color</span><br><span class="line">    cpb.size = Vector2(50, 50)</span><br><span class="line">    set_drag_preview(cpb)</span><br><span class="line">    return 物品</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func _can_drop_data(position, data):</span><br><span class="line">    # 检查是否为武器基类</span><br><span class="line">    if data is 武器基类:</span><br><span class="line">        return true</span><br><span class="line">    else:</span><br><span class="line">        return false</span><br><span class="line"></span><br><span class="line">#数据处理</span><br><span class="line">func _drop_data(position, data):</span><br><span class="line">     # 处理拖放的数据</span><br><span class="line">    print(&quot;Dropped data: &quot;, data)</span><br></pre></td></tr></table></figure>

<ul>
<li>拖拽改良</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">func _get_drag_data(position):</span><br><span class="line">    if 背包.背包[索引ID]:</span><br><span class="line">        var cpb =TextureRect.new()</span><br><span class="line">        cpb.texture=背包.背包[索引ID].icon</span><br><span class="line">        set_drag_preview(cpb)</span><br><span class="line">    return 背包.背包[索引ID]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func _can_drop_data(position, data):</span><br><span class="line">    # 检查是否为武器基类</span><br><span class="line">    if data is 雷达基类:</span><br><span class="line">        return true</span><br><span class="line">    else:</span><br><span class="line">        return false</span><br><span class="line"></span><br><span class="line">#数据处理</span><br><span class="line">func _drop_data(position, data):</span><br><span class="line">    if 背包.背包[索引ID]!=null:</span><br><span class="line">        var ite=背包.背包.find(data)</span><br><span class="line">        var temp=背包.背包[索引ID]</span><br><span class="line">        背包.背包[索引ID]=data</span><br><span class="line">        背包.背包[ite]=temp</span><br><span class="line">    else :</span><br><span class="line">        var ite=背包.背包.find(data)</span><br><span class="line">        背包.背包[索引ID]=data</span><br><span class="line">        背包.背包[ite]=null</span><br></pre></td></tr></table></figure>

<ul>
<li>装备槽</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">extends PanelContainer</span><br><span class="line"></span><br><span class="line">@onready var texture_rect: TextureRect = $TextureRect</span><br><span class="line">var 背包:装备槽UI</span><br><span class="line">var 装备:雷达基类</span><br><span class="line"># Called when the node enters the scene tree for the first time.</span><br><span class="line">func _ready() -&gt; void:</span><br><span class="line">    背包=get_tree().get_first_node_in_group(&quot;装备槽&quot;)</span><br><span class="line">    pass # Replace with function body.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Called every frame. &#x27;delta&#x27; is the elapsed time since the previous frame.</span><br><span class="line">func _process(delta: float) -&gt; void:</span><br><span class="line">    刷新纹理()</span><br><span class="line"></span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func _gui_input(event: InputEvent) -&gt; void:</span><br><span class="line">    if Input.is_action_just_pressed(&quot;鼠标左&quot;):</span><br><span class="line">        for i in 背包.背包.size():</span><br><span class="line">            if 背包.背包[i]==null:</span><br><span class="line">                背包.背包[i]=装备</span><br><span class="line">                装备=null</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">func 刷新纹理():</span><br><span class="line">    if 装备!=null:</span><br><span class="line">        texture_rect.texture=装备.icon</span><br><span class="line">    elif 装备==null:</span><br><span class="line">        texture_rect.texture=preload(&quot;res://材质/空纹理.png&quot;)</span><br><span class="line"></span><br><span class="line">#func _get_drag_data(position):</span><br><span class="line">    #if 装备:</span><br><span class="line">        #var cpb =TextureRect.new()</span><br><span class="line">        #cpb.texture=装备.icon</span><br><span class="line">        #set_drag_preview(cpb)</span><br><span class="line">    #return 装备</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func _can_drop_data(position, data):</span><br><span class="line">    # 检查是否为武器基类</span><br><span class="line">    if data is 雷达基类:</span><br><span class="line">        return true</span><br><span class="line">    else:</span><br><span class="line">        return false</span><br><span class="line"></span><br><span class="line">#数据处理</span><br><span class="line">func _drop_data(position, data):</span><br><span class="line">    if 装备!=null:</span><br><span class="line">        var ite=背包.背包.find(data)</span><br><span class="line">        var temp=装备</span><br><span class="line">        装备=data</span><br><span class="line">        背包.背包[ite]=temp</span><br><span class="line">        背包.更换雷达.emit(装备)</span><br><span class="line">    else :</span><br><span class="line">        var ite=背包.背包.find(data)</span><br><span class="line">        装备=data</span><br><span class="line">        背包.背包[ite]=null</span><br><span class="line">        背包.更换雷达.emit(装备)</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://luojiangbao015.github.io">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://luojiangbao015.github.io/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CS%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81/">https://luojiangbao015.github.io/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CS%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/auraea/tags/%E5%AD%A6%E4%B9%A0/">学习</a></div><div class="post-share"><div class="social-share" data-image="https://img2.imgtp.com/2024/03/29/G1firM5D.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/auraea/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/CSGODOT/" title="Csharp戈多"><img class="cover" src="/auraea/img/ww/D003.png" onerror="onerror=null;src='/auraea/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Csharp戈多</div></div><div class="info-2"><div class="info-item-1">声明Export (PropertyHint)1234567891011121314151617181920212223242526//基础声明语法[Exprot]public int age&#123;set;get;&#125;//限制最大最小[Export(PropertyHint.Range,&quot;0,100,1&quot;)] //整值枚举[Export(PropertyHint.Enum,&quot;A,B&quot;)]        //输出1,2//字符串枚举[Export(PropertyHint.EnumSuggestion ,&quot;A,B&quot;)]    //输出A,B//曲线[Export(PropertyHint.ExpEasing,&quot;positive_only&quot;)] //锁 Link[Export(PropertyHint.Link)] //标志flags[Export(PropertyHint.Flags,&quot;A:16,B,C&quot;)] ...</div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/%E6%88%88%E5%A4%9A/CSharp/cs%E6%88%88%E5%A4%9AAPI/" title="CSAPI"><img class="cover" src="/auraea/img/ww/D003.png" onerror="onerror=null;src='/auraea/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">CSAPI</div></div><div class="info-2"><div class="info-item-1">数据结构线程概念 并发 分配时间 并行 多核运行 计算量密集 同步 需要等待 异步 不需要等待 网络操作     英文名 中文名 描述    Queue 队列    Stack 栈    Dictionary&lt;TKey,...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/auraea/2025/03/14/cpp/cpp%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="cpp数据结构"><img class="cover" src="https://img2.imgtp.com/2024/03/29/CuFHenMA.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">cpp数据结构</div></div><div class="info-2"><div class="info-item-1">结构线性表   方法     初始化init()    头插insertAtHead(int vale)    尾插insertAtTail(int vale)    删除指定元素deletenode(int vale)    遍历输出printList()    析构LinkedList()    线性表数组1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192#include&lt;bits/stdc++.h&gt;using namespace std;const int N = 10;    //最大容量为10int res[N + 1];    //存储元素,下标从1开始int cnt = 0;    //数组指针，也表示当前元素数量//插入元素void...</div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/cpp/cpp%E6%A8%A1%E6%9D%BF/" title="cpp模板"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">cpp模板</div></div><div class="info-2"><div class="info-item-1">Git 拉取 1git clone 链接  修改  添加 1git add .  检查 1git status  提交 1git commit -m &quot;input yours message&quot;  推送 1git push origin main  </div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/cpp/CMake/" title="Cmake"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">Cmake</div></div><div class="info-2"><div class="info-item-1">文档说明 用于记录CMake编译器的用法  CMake用法基础 模板  123cmake_minimum_required(VERSION 3.10)  #版本project(MyProject)  #项目名   可执行文件  1add_executable(可执行文件名 main.cpp)    多个可执行文件  12add_executable(可执行文件名1 my1.cpp) add_executable(可执行文件名2 my2.cpp)   生成静态文件 生成静态库  12set(MUL_SOURCES ./mul/mul.cpp)          #设置CPP路径变量add_library(mul STATIC $&#123;MUL_SOURCES&#125;)  #通过MUL_SOURCES路径STATIC属性添加为静态库   链接全局,将静态链接链接至所有程序  123include_directories(./)  #添加头文件路径1.link_directories(路径)  #添加静态库链接所在目录2.link_libraries(库名)     ...</div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/cpp/inGUI/" title="ImGUI"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">ImGUI</div></div><div class="info-2"><div class="info-item-1">文档说明 ImGui库是一个强大的C++GUI开源库,可用于开发多种可视化程序  窗口创建窗口 源码声明  1bool ImGui::Begin(const char* name, bool* p_open, ImGuiWindowFlags flags)  //创建窗口  1void ImGui::End()  //结束   name 窗口名 p_open 布尔指针,控制窗口显示 ImGuiWindowFlags...</div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/cpp/%E5%85%B3%E9%94%AE%E5%AD%97/" title="CPP关键字"><img class="cover" src="https://img2.imgtp.com/2024/03/29/Iy4Ct6xe.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">CPP关键字</div></div><div class="info-2"><div class="info-item-1">关键 🔵未了解  🔴了解        数据类型 控制 存储 类 转换 异常    int  整型🔴 if  如果🔴 auto 字典推导🔴 class类🔴 const_cas类型转换🔵 catch异常处理🔵   long  长整型🔴 else  否则🔴 static  静态🔴 template模🔴板 dynamic_cast 类型转换操作符🔵 throw抛出异常🔵   float 浮点🔴 switch判断🔴 extern其他文件定义🔵 friend友元🔴 reinterpret_cast类型转换🔵 try异常   double  双精度🔴 case  或者🔴 mutable在常量函数修改属性🔴 union 联合体🔴 static_cast型转换操作符之🔵    char  字符🔴 default switch的否则🔴 sizeof  长度🔴 **struct **结构体🔴     wchar_t宽字符类型 for  循坏🔴 this  特殊指针🔴 new指向🔴     public公开🔴 break...</div></div></div></a><a class="pagination-related" href="/auraea/2025/03/14/cs/%E5%85%B3%E9%94%AE%E5%AD%97/" title="c#关键字"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-14</div><div class="info-item-2">c#关键字</div></div><div class="info-2"><div class="info-item-1">文档说明 记录C#的一些基础学习  C#常用关键字关键字集合123456class new public private protectedstatic静态 internal程序集 readonly只读 virtual虚函数 override重写 interface接口 abstract抽象 delegate委托sealed密封 base基类 this自己for break continuewith  数据类型 int 整数 float  浮点 double 双精度浮点 char 字符型 string 字符串 bool 布尔 void 方法  new 实例化12345678910111213141516171819202122232425262728293031323334353637using System;namespace 命名空间&#123;    class 游戏类    &#123;       public string 名字 &#123;  get; set; &#125; //声明字符串类型       public int 年龄 &#123; get;...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/auraea/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/auraea/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">John Doe</div><div class="author-info-description"></div><div class="site-data"><a href="/auraea/archives/"><div class="headline">Articles</div><div class="length-num">36</div></a><a href="/auraea/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/auraea/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">脚本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%94%AE"><span class="toc-number">1.1.</span> <span class="toc-text">按键</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSON"><span class="toc-number">2.</span> <span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#xlsx%E5%92%8Cjson%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.1.</span> <span class="toc-text">xlsx和json转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96JSON"><span class="toc-number">2.2.</span> <span class="toc-text">读取JSON</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.3.</span> <span class="toc-text">序列化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GUI"><span class="toc-number">3.</span> <span class="toc-text">GUI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E5%8C%85"><span class="toc-number">3.1.</span> <span class="toc-text">背包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2D%E7%BB%98%E5%88%B6"><span class="toc-number">3.2.</span> <span class="toc-text">2D绘制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E4%BA%BA%E7%A7%B0C-%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">第三人称C#控制器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A6%E5%99%A8%E7%AF%87"><span class="toc-number">5.</span> <span class="toc-text">武器篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A6%E5%99%A8"><span class="toc-number">5.1.</span> <span class="toc-text">武器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A6%E5%99%A8%E5%B0%84%E5%87%BB%E6%A8%A1%E5%BC%8F%E7%B1%BB%E7%9A%84%E8%AE%BE%E6%83%B3"><span class="toc-number">5.1.1.</span> <span class="toc-text">武器射击模式类的设想</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E6%83%B3%E4%B8%80-%E9%80%9A%E8%BF%87%E6%9E%9A%E4%B8%BE-%E5%8D%B3%E8%A3%85%E5%A4%87%E7%BB%84%E4%BB%B6%E5%88%87%E6%8D%A2%E8%AE%BE%E8%AE%A1%E7%8A%B6%E6%80%81"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">设想一:通过枚举,即装备组件切换设计状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E6%83%B3%E4%BA%8C-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%83%A8%E4%BB%B6%E6%8A%BD%E8%B1%A1%E7%B1%BB-%E4%BB%96%E4%BB%AC%E6%9C%89%E4%B8%80%E4%B8%AA%E6%8A%BD%E8%B1%A1%E5%90%91%E6%96%B9%E6%B3%95-%E4%B8%94%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%86%99-%E6%AD%A6%E5%99%A8%E8%B0%83%E7%94%A8%E5%AE%83%E7%9A%84%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95-%E7%84%B6%E5%90%8E%E7%94%A8%E4%BA%8E%E4%B8%8D%E5%90%8C%E6%A8%A1%E5%BC%8F-%E4%B8%94%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E9%83%A8%E4%BB%B6%E6%89%A9%E5%B1%95%E7%8E%A9%E6%B3%95"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">设想二:创建一个部件抽象类,他们有一个抽象向方法,且可以重写,武器调用它的抽象方法,然后用于不同模式,且可以通过部件扩展玩法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E6%83%B3%E4%B8%89-%E9%80%9A%E8%BF%87%E6%AD%A6%E5%99%A8%E8%B5%8B%E4%BA%88%E5%AD%90%E5%BC%B9%E6%96%B9%E5%90%91%E5%88%9D%E5%A7%8B%E4%BD%8D%E7%BD%AE%E5%B9%B6%E5%88%9B%E5%BB%BA%E5%AD%90%E5%BC%B9%E5%8F%91%E5%B0%84-%E5%AD%90%E5%BC%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E9%80%94%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E9%80%BB%E8%BE%91"><span class="toc-number">5.1.2.</span> <span class="toc-text">设想三:通过武器赋予子弹方向初始位置并创建子弹发射,子弹是否在途中实现自己的逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E5%BC%B9"><span class="toc-number">5.2.</span> <span class="toc-text">子弹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E5%BC%B9%E4%BD%8D%E7%BD%AE-%E6%96%B9%E5%90%91-%E6%97%8B%E8%BD%AC"><span class="toc-number">5.2.1.</span> <span class="toc-text">子弹位置,方向,旋转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E5%BC%B91-%E7%BB%8F%E8%BF%87%E4%B8%80%E6%AE%B5%E8%B7%9D%E7%A6%BB%E8%87%AA%E5%8A%A8%E9%94%80%E6%AF%81-%E6%98%AF%E5%90%A6%E4%BC%9A%E7%88%86%E7%82%B8-%E6%98%AF%E5%90%A6%E7%A9%BF%E9%80%8F%E6%95%8C%E4%BA%BA"><span class="toc-number">5.2.2.</span> <span class="toc-text">子弹1:经过一段距离自动销毁,是否会爆炸?,是否穿透敌人?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E5%BC%B92-%E7%A2%B0%E5%88%B0%E5%A2%99%E9%9D%A2%E4%BC%9A%E5%8F%8D%E5%BC%B9-%E6%98%AF%E5%90%A6%E5%9C%A8%E5%9C%B0%E9%9D%A2%E4%BC%9A%E6%BB%9A%E5%8A%A8-%E7%9B%B8%E5%AF%B9%E5%8F%8D%E5%BC%B9%E8%BF%98%E6%98%AF%E8%A7%92%E5%BA%A6%E5%8F%8D%E5%BC%B9"><span class="toc-number">5.2.3.</span> <span class="toc-text">子弹2:碰到墙面会反弹,是否在地面会滚动?,相对反弹还是角度反弹?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%B7%E9%98%B1"><span class="toc-number">5.3.</span> <span class="toc-text">陷阱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E9%9B%B7-%E6%94%BE%E5%9C%A8%E5%9C%B0%E4%B8%8A-%E6%80%AA%E7%89%A9%E7%A2%B0%E5%88%B0%E4%BC%9A%E7%88%86%E7%82%B8-%E5%AF%B9%E6%95%8C%E4%BA%BA%E7%85%A7%E6%88%90%E4%BC%A4%E5%AE%B3"><span class="toc-number">5.3.1.</span> <span class="toc-text">地雷:放在地上,怪物碰到会爆炸,对敌人照成伤害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%92%E6%B0%94-%E5%BD%93%E6%95%8C%E4%BA%BA%E7%A2%B0%E6%92%9E%E6%97%B6-%E6%8C%81%E7%BB%AD%E5%AF%B9%E6%95%8C%E4%BA%BA%E9%80%A0%E6%88%90%E4%BC%A4%E5%AE%B3"><span class="toc-number">5.3.2.</span> <span class="toc-text">毒气:当敌人碰撞时,持续对敌人造成伤害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%90%BD%E7%A9%B4-%E5%BD%93%E6%95%8C%E4%BA%BA%E7%A2%B0%E6%92%9E%E5%90%8E-%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E5%9D%91-%E5%B9%B6%E5%B0%86%E6%95%8C%E4%BA%BA%E9%99%B7%E8%BF%9B%E5%8E%BB%E4%BD%BF%E5%85%B6%E6%97%A0%E6%B3%95%E7%BB%A7%E7%BB%AD%E7%A7%BB%E5%8A%A8"><span class="toc-number">5.3.3.</span> <span class="toc-text">落穴:当敌人碰撞后,生成一个坑,并将敌人陷进去使其无法继续移动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%93%E5%85%B7"><span class="toc-number">5.4.</span> <span class="toc-text">道具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E5%93%81%E7%B1%BB%EF%BC%9A%E8%AE%B0%E5%BD%95%E7%89%A9%E5%93%81%E7%9A%84%E4%BB%B7%E6%A0%BC%E6%95%B0%E9%87%8F%E5%9B%BE%E6%A0%87%E6%8F%8F%E8%BF%B0%E5%B1%9E%E6%80%A7%E7%AD%89"><span class="toc-number">5.4.1.</span> <span class="toc-text">物品类：记录物品的价格数量图标描述属性等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E6%8B%BE%E5%8F%96%E9%81%93%E5%85%B7-%E6%8B%A5%E6%9C%89%E7%89%A9%E5%93%81%E7%B1%BB%E7%9A%84%E4%BF%A1%E6%81%AF-%E8%AE%B0%E5%BD%95%E4%BA%86%E7%89%A9%E5%93%81%E7%B1%BB%E7%9A%84ID-%E5%BD%93%E8%A2%AB%E6%8B%BE%E5%8F%96%E6%97%B6%E5%90%91%E7%89%A9%E5%93%81%E7%B1%BB%E5%8F%91%E5%87%BA%E4%BF%A1%E6%81%AF%E6%9B%B4%E6%96%B0%E7%89%A9%E5%93%81%E7%B1%BB-%E7%84%B6%E5%90%8E%E9%94%80%E6%AF%81%E3%80%82"><span class="toc-number">5.4.2.</span> <span class="toc-text">可拾取道具:拥有物品类的信息,记录了物品类的ID,当被拾取时向物品类发出信息更新物品类,然后销毁。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%A3%85%E5%A4%87%E9%81%93%E5%85%B7%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%9C%A8%E7%89%A9%E5%93%81%E9%87%8C%EF%BC%8C%E5%BD%93%E9%9C%80%E8%A6%81%E8%A3%85%E5%A4%87%E6%97%B6%E4%BB%8E%E7%89%A9%E5%93%81%E8%8E%B7%E5%BE%97%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%AE%9E%E4%BE%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E7%89%A9%E5%93%81%E8%A3%85%E5%A4%87%E5%88%B0%E7%8E%A9%E5%AE%B6%E8%BA%AB%E4%B8%8A%E3%80%82"><span class="toc-number">5.4.3.</span> <span class="toc-text">可装备道具：数据存储在物品里，当需要装备时从物品获得数据并实例化一个新的物品装备到玩家身上。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%B7%9D%E7%A6%BB%E7%8E%A9%E5%AE%B6%E6%9C%80%E8%BF%91%E7%9A%84%E6%95%8C%E4%BA%BA-%E8%BF%94%E5%9B%9E%E6%9C%80%E8%BF%91%E6%95%8C%E4%BA%BA%E8%8A%82%E7%82%B9"><span class="toc-number">5.5.</span> <span class="toc-text">获取距离玩家最近的敌人,返回最近敌人节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%A1%80%E9%87%8F%E6%9C%80%E5%B0%91%E7%9A%84%E6%95%8C%E4%BA%BA-%E5%B9%B6%E8%BF%94%E5%9B%9E"><span class="toc-number">5.6.</span> <span class="toc-text">获取血量最少的敌人,并返回</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GUI-1"><span class="toc-number">6.</span> <span class="toc-text">GUI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B8%E6%88%8F%E8%AE%BE%E6%83%B3"><span class="toc-number">6.0.0.1.</span> <span class="toc-text">游戏设想</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/auraea/2025/03/14/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/" title="游戏设计"><img src="/auraea/img/ww/D003.png" onerror="this.onerror=null;this.src='/auraea/img/404.jpg'" alt="游戏设计"/></a><div class="content"><a class="title" href="/auraea/2025/03/14/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/" title="游戏设计">游戏设计</a><time datetime="2025-03-14T11:39:30.302Z" title="Created 2025-03-14 19:39:30">2025-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E6%B8%B8%E6%88%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="游戏源码解析"><img src="/auraea/img/ww/D003.png" onerror="this.onerror=null;this.src='/auraea/img/404.jpg'" alt="游戏源码解析"/></a><div class="content"><a class="title" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E6%B8%B8%E6%88%8F%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="游戏源码解析">游戏源码解析</a><time datetime="2025-03-14T11:39:30.299Z" title="Created 2025-03-14 19:39:30">2025-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4/" title="怪物猎人伤害"><img src="/auraea/img/ww/D003.png" onerror="this.onerror=null;this.src='/auraea/img/404.jpg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-14T11:39:30.298Z" title="Created 2025-03-14 19:39:30">2025-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4%20-%20%E5%89%AF%E6%9C%AC/" title="怪物猎人伤害"><img src="/auraea/img/ww/D003.png" onerror="this.onerror=null;this.src='/auraea/img/404.jpg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E5%B0%8F%E8%AF%B4%20-%20%E5%89%AF%E6%9C%AC/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-14T11:39:30.296Z" title="Created 2025-03-14 19:39:30">2025-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E4%BC%A4%E5%AE%B3%E8%AE%A1%E7%AE%97/" title="怪物猎人伤害"><img src="/auraea/img/ww/D003.png" onerror="this.onerror=null;this.src='/auraea/img/404.jpg'" alt="怪物猎人伤害"/></a><div class="content"><a class="title" href="/auraea/2025/03/14/%E6%9D%82%E9%A1%B9/%E4%BC%A4%E5%AE%B3%E8%AE%A1%E7%AE%97/" title="怪物猎人伤害">怪物猎人伤害</a><time datetime="2025-03-14T11:39:30.295Z" title="Created 2025-03-14 19:39:30">2025-03-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/auraea/js/utils.js"></script><script src="/auraea/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>